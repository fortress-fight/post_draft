# Glob 匹配

所谓的 glob 模式是指 shell 所使用的简化了的正则表达式。

## 基础规则

| 通配符          | 描述                                             | 示例         | 匹配                       | 不匹配                      |
| --------------- | ------------------------------------------------ | ------------ | -------------------------- | --------------------------- |
| \*              | 匹配任意数量的任何字符，包括无                   | Law\*        | Law, Laws, Lawyer          | GrokLaw, La, aw             |
| ?               | 匹配任何单个字符(不会匹配路径分隔符)             | ?at          | Cat, cat, Bat, bat         | at                          |
| [abc]           | 匹配括号中给出的一个字符                         | [CB]at       | Cat, Bat                   | cat, bat                    |
| [a-z]           | 匹配括号中给出的范围中的一个字符                 | Letter[0-9]  | Letter0, Letter1 … Letter9 | Letters, Letter, Letter10   |
| [!abc]          | 匹配括号中未给出的一个字符                       | [!C]at       | Bat, bat, cat              | Cat                         |
| [!a-z]          | 匹配不在括号内给定范围内的一个字符               | Letter[!3-5] | Letter1…                   | Letter3 … Letter5, Letterxx |
| {str1,str2,...} | 匹配 srt1 或者 srt2 或者更多字符串，也可以是集合 |              |                            |                             |
| {start..end}    | 会匹配连续范围的字符。                           |              |                            |                             |

如果希望列出当前所有子目录中匹配的文件，可以使用：`**/**/*`

示例：

```shell
$ echo d{a,e,i,u,o}g
dag deg dig dug dog

$ echo d{a..d}g
dag dbg dcg ddg

$ echo {11..15}
11 12 13 14 15
```

**专用字符集**

| column0    | column1            |
| ---------- | ------------------ |
| [:alnum:]  | 任意数字或者字母   |
| [:alpha:]  | 任意字母           |
| [:space:]  | 空格               |
| [:lower:]  | 小写字母           |
| [:digit:]  | 任意数字           |
| [:upper:]  | 任意大写字母       |
| [:cntrl:]  | 控制符             |
| [:graph:]  | 图形               |
| [:print:]  | 可打印字符         |
| [:punct:]  | 标点符号           |
| [:xdigit:] | 十六进制数         |
| [:blank:]  | 空白字符（未验证） |

**元字符**

| column0 | column1                                                              |
| ------- | -------------------------------------------------------------------- |
| IFS     | 由 < space > 或 < tab > 或 < enter > 三者之一组成                    |
| CR      | 由 < enter > 产生                                                    |
| =       | 设定变量                                                             |
| \$      | 作变量或运算替换                                                     |
| >       | 重导向标准输出                                                       |
| <       | 重导向标准输入                                                       |
| `|`     | 命令管线                                                             |
| &       | 重导向文件描述符，或将命令静默执行                                   |
| ( )     | 将其内的命令置于 nested subshell 执行，或用于运算或命令替换          |
| { }     | 将其内的命令置于 non-named function 中执行，或用在变量替换的界定范围 |
| ;       | 在前一个命令结束时，而忽略其返回值，继续执行下一个命令               |
| &&      | 在前一个命令结束时，若返回值为 true，继续执行下一个命令              |
| `||`    | 在前一个命令结束时，若返回值为 false，继续执行下一个命令             |
| !       | 执行 history 中的命令                                                |

## 注意事项

**通配符是先解释，再执行。**

Bash 接收到命令以后，发现里面有通配符，会进行通配符扩展，然后再执行命令。

示例：

```shell
$ ls a*.txt
ab.txt
```

> 上面命令的执行过程是，Bash 先将 a\*.txt 扩展成 ab.txt，然后再执行 ls ab.txt。

## .gitignore

在 `.gitignore` 文件中可以使用 glob 模式匹配，还可以使用下述规则

-   所有空行或者以 # 开头的行都会被 Git 忽略
-   匹配模式可以以 / 开头防止递归
-   匹配模式可以以 / 结尾指定目录
-   要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号 ! 取反

## 参考

-   [命令行通配符教程-阮一峰](http://www.ruanyifeng.com/blog/2018/09/bash-wildcards.html)
